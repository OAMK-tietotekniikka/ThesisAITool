<!-- UPDATE 2025 Apr 8: đệt gen đc 1-2 lần là đòi nạp tiền => next -->
<!-- https://huggingface.co/spaces/enzostvs/deepsite -->
<!-- Phần đầu gen = deepsite, promp: write a website to fully utilize this api server: <paste code app.py, nhưng bị thiếu nên kêu deepseek completes -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThesisAI Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-50">
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar fixed inset-y-0 left-0 bg-indigo-800 text-white w-64 flex flex-col z-50">
        <div class="p-4 flex items-center justify-between border-b border-indigo-700">
            <div class="flex items-center">
                <i class="fas fa-graduation-cap text-2xl mr-3" aria-hidden="true"></i>
                <span class="logo-text text-xl font-bold">ThesisAI</span>
            </div>
            <button id="toggleSidebar" class="text-white focus:outline-none" aria-label="Toggle sidebar">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>
        </div>
        
        <div class="p-4 border-b border-indigo-700 user-info">
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center">
                    <i class="fas fa-user" aria-hidden="true"></i>
                </div>
                <div class="ml-3">
                    <div id="usernameDisplay" class="font-medium">John Doe</div>
                    <div id="userRoleDisplay" class="text-xs text-indigo-200">Student</div>
                </div>
            </div>
        </div>
        
        <nav class="flex-1 overflow-y-auto" role="navigation">
            <div id="studentNav" class="hidden">
                <a href="#" onclick="event.preventDefault(); showSection('dashboard')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-tachometer-alt mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Dashboard</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('uploadThesis')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-upload mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Upload Thesis</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('myTheses')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-file-alt mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">My Theses</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('aiFeedback')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-robot mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">AI Feedback</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('supervisorFeedback')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-user-tie mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Supervisor Feedback</span>
                </a>
            </div>
            
            <div id="supervisorNav" class="hidden">
                <a href="#" onclick="event.preventDefault(); showSection('dashboard')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-tachometer-alt mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Dashboard</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('assignedStudents')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-users mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Assigned Students</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('reviewTheses')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-file-signature mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Review Theses</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('provideFeedback')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-comment-dots mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Provide Feedback</span>
                </a>
            </div>
            
            <div id="adminNav" class="hidden">
                <a href="#" onclick="event.preventDefault(); showSection('dashboard')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-tachometer-alt mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Dashboard</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('manageUsers')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-users-cog mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Manage Users</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('assignSupervisors')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-handshake mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">Assign Supervisors</span>
                </a>
                <a href="#" onclick="event.preventDefault(); showSection('allTheses')" class="sidebar-item flex items-center p-4 hover:bg-indigo-700">
                    <i class="fas fa-archive mr-3" aria-hidden="true"></i>
                    <span class="sidebar-text">All Theses</span>
                </a>
            </div>
        </nav>
        
        <div class="p-4 border-t border-indigo-700">
            <button onclick="logout()" class="w-full flex items-center justify-center py-2 px-4 bg-indigo-700 hover:bg-indigo-600 rounded text-white">
                <i class="fas fa-sign-out-alt mr-2" aria-hidden="true"></i>
                <span class="sidebar-text">Logout</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div id="content" class="content min-h-screen ml-64">
        <!-- Login Section -->
        <div id="loginSection" class="min-h-screen flex items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
                <div class="text-center mb-8">
                    <i class="fas fa-graduation-cap text-indigo-600 text-5xl mb-4" aria-hidden="true"></i>
                    <h1 class="text-3xl font-bold text-gray-800">ThesisAI</h1>
                    <p class="text-gray-600 mt-2">Sign in to your account</p>
                </div>
                
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
                        <input type="text" id="username" name="username" required 
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                        <input type="password" id="password" name="password" required 
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    
                    <div>
                        <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Sign in
                        </button>
                    </div>
                </form>

                <div class="mt-6 text-center">
                    <a href="#" onclick="event.preventDefault(); showAddUserModal()" class="text-indigo-600 hover:underline text-sm">Sign up now - registration is open for a few days!</a>
                </div>
                
                <div id="loginError" class="mt-4 text-center text-sm text-red-600 hidden">
                    Invalid username or password
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboardSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Dashboard</h2>
                <div class="text-sm text-gray-500" id="currentDate"></div>
            </div>
            
            <div id="studentDashboard" class="hidden">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-indigo-100 text-indigo-600 mr-4">
                                <i class="fas fa-file-alt" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Theses Uploaded</p>
                                <p id="thesesCount" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 text-green-600 mr-4">
                                <i class="fas fa-check-circle" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Approved Theses</p>
                                <p id="approvedTheses" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-4">
                                <i class="fas fa-comments" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Pending Feedback</p>
                                <p id="pendingFeedback" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6 mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Recent Activity</h3>
                    <div id="studentActivity" class="space-y-4">
                        <!-- Activity items will be added here -->
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Supervisor Information</h3>
                    <div id="supervisorInfo" class="flex items-center">
                        <!-- Supervisor info will be added here -->
                    </div>
                </div>
            </div>
            
            <div id="supervisorDashboard" class="hidden">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-indigo-100 text-indigo-600 mr-4">
                                <i class="fas fa-users" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Assigned Students</p>
                                <p id="studentCount" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4">
                                <i class="fas fa-file-signature" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Theses to Review</p>
                                <p id="thesesToReview" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 text-green-600 mr-4">
                                <i class="fas fa-check-double" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Completed Reviews</p>
                                <p id="completedReviews" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6 mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Recent Student Submissions</h3>
                    <div id="studentSubmissions" class="space-y-4">
                        <!-- Submissions will be added here -->
                    </div>
                </div>
            </div>
            
            <div id="adminDashboard" class="hidden">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-indigo-100 text-indigo-600 mr-4">
                                <i class="fas fa-users" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Total Users</p>
                                <p id="totalUsers" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-4">
                                <i class="fas fa-file-alt" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Total Theses</p>
                                <p id="totalTheses" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-purple-100 text-purple-600 mr-4">
                                <i class="fas fa-user-tie" aria-hidden="true"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-500">Supervisors</p>
                                <p id="supervisorCount" class="text-2xl font-semibold text-gray-900">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6 mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Recent System Activity</h3>
                    <div id="systemActivity" class="space-y-4">
                        <!-- Activity will be added here -->
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Quick Actions</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="showSection('manageUsers')" class="flex items-center justify-center p-4 bg-indigo-50 hover:bg-indigo-100 rounded-lg">
                            <i class="fas fa-user-plus text-indigo-600 mr-2" aria-hidden="true"></i>
                            <span>Add New User</span>
                        </button>
                        <button onclick="showSection('assignSupervisors')" class="flex items-center justify-center p-4 bg-indigo-50 hover:bg-indigo-100 rounded-lg">
                            <i class="fas fa-handshake text-indigo-600 mr-2" aria-hidden="true"></i>
                            <span>Assign Supervisors</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Student Sections -->
        <div id="uploadThesisSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Upload Thesis</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6">
                <div id="uploadForm" class="file-upload p-8 rounded-lg text-center cursor-pointer">
                    <input type="file" id="thesisFile" class="hidden" accept=".pdf,.doc,.docx">
                    <i class="fas fa-cloud-upload-alt text-4xl text-indigo-500 mb-3" aria-hidden="true"></i>
                    <p class="text-lg font-medium text-gray-700">Drag & drop your thesis file here or click to browse</p>
                    <p class="text-sm text-gray-500 mt-2">Supported formats: PDF, DOC, DOCX</p>
                </div>
                
                <div id="uploadProgress" class="hidden mt-6">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-gray-700">Uploading...</span>
                        <span id="uploadPercent" class="text-sm font-medium text-gray-700">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="uploadBar" class="bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
                
                <div id="uploadSuccess" class="hidden mt-6 p-4 bg-green-50 rounded-lg text-green-700">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle text-green-500 mr-2" aria-hidden="true"></i>
                        <span>Thesis uploaded successfully!</span>
                    </div>
                    <div class="mt-2 text-sm">
                        <p>Your thesis is now being processed. You can request AI feedback or wait for your supervisor's review.</p>
                    </div>
                    <div class="mt-4 flex space-x-3">
                        <button onclick="showSection('aiFeedback')" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm">
                            Request AI Feedback
                        </button>
                        <button onclick="uploadAnotherThesis()" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm">
                            Upload Another Thesis
                        </button>
                    </div>
                </div>
                
                <div id="uploadError" class="hidden mt-6 p-4 bg-red-50 rounded-lg text-red-700">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-circle text-red-500 mr-2" aria-hidden="true"></i>
                        <span>Error uploading thesis</span>
                    </div>
                    <div id="uploadErrorMessage" class="mt-2 text-sm"></div>
                </div>
            </div>
        </div>

        <div id="myThesesSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">My Theses</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Upload Date</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="thesesList" class="bg-white divide-y divide-gray-200">
                            <!-- Theses will be added here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noThesesMessage" class="p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-file-alt text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">You haven't uploaded any theses yet.</p>
                    <button onclick="showSection('uploadThesis')" class="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">
                        Upload Your First Thesis
                    </button>
                </div>
            </div>
        </div>

        <div id="aiFeedbackSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">AI Feedback</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div id="aiFeedbackContent">
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Request AI Feedback</h3>
                    <p class="text-gray-600 mb-4">Select a thesis to get AI-generated feedback on your work.</p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Select Thesis</label>
                            <select id="thesisSelect" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">-- Select a thesis --</option>
                                <!-- Options will be added here -->
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Assessment Criteria</label>
                            <div id="assessmentCriteria" class="space-y-3">
                                <div class="bg-blue-50 border-l-4 border-blue-400 p-3 rounded">
                                    <p class="text-sm text-blue-800 font-medium mb-2">Thesis Evaluation Framework</p>
                                    <p class="text-xs text-blue-700">Your thesis will be evaluated against OAMK's comprehensive assessment criteria covering academic rigor, methodology, and presentation quality.</p>
                                </div>
                                
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="academicQuality" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked disabled>
                                        <label for="academicQuality" class="ml-2 block text-sm text-gray-700">Academic quality and theoretical framework</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="methodology" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked disabled>
                                        <label for="methodology" class="ml-2 block text-sm text-gray-700">Research methodology and data analysis</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="presentation" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked disabled>
                                        <label for="presentation" class="ml-2 block text-sm text-gray-700">Presentation quality and structure</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="references" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked disabled>
                                        <label for="references" class="ml-2 block text-sm text-gray-700">Reference formatting (Harvard style)</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" id="practicalRelevance" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded" checked disabled>
                                        <label for="practicalRelevance" class="ml-2 block text-sm text-gray-700">Practical relevance and professional development</label>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 border-l-4 border-gray-400 p-3 rounded">
                                    <p class="text-xs text-gray-600 mb-2">
                                        <strong>Reference Guidelines:</strong> All citations must follow Harvard referencing style as per OAMK guidelines. 
                                        In-text citations and bibliography entries must be properly formatted for academic integrity.
                                    </p>
                                    <div class="space-y-1">
                                        <p class="text-xs text-gray-600"><strong>Full Guidelines:</strong></p>
                                        <ul class="text-xs text-gray-600 space-y-1">
                                            <li>• <a href="https://oamk.fi/en/study/thesis/reference-guidelines/" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">Reference Guidelines (Harvard Style)</a></li>
                                            <li>• <a href="https://oamk.fi/wp-content/uploads/2024/05/opinnaytetyo_arviointikriteerit_amk_en_osa1.pdf" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">Assessment Criteria - Part 1</a></li>
                                            <li>• <a href="https://oamk.fi/wp-content/uploads/2024/05/opinnaytetyo_arviointikriteerit_amk_en_osa2.pdf" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">Assessment Criteria - Part 2</a></li>
                                            <li>• <a href="https://oamk.fi/wp-content/uploads/2024/05/opinnaytetyo_arviointikriteerit_amk_en_osa3.pdf" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">Assessment Criteria - Part 3</a></li>
                                            <li>• <a href="https://oamk.fi/wp-content/uploads/2024/05/opinnaytetyo_arviointikriteerit_amk_en_osa4.pdf" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">Assessment Criteria - Part 4</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pt-2">
                            <input type="text" id="modelID" name="modelID" class="hidden h-full w-1/2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="(Optional) model id">
                            <button id="requestFeedbackBtn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">
                                <i class="fas fa-robot mr-2" aria-hidden="true"></i> Request AI Feedback
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Feedback Results - Completely Rewritten -->
                <!-- Feedback Results -->
                <div id="feedbackResults" class="hidden">
                    <div class="bg-white rounded-lg shadow-lg border border-gray-200">
                        <!-- Header -->
                        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4 rounded-t-lg">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-robot text-white text-xl mr-3"></i>
                                    <div>
                                        <h3 class="text-lg font-semibold text-white">AI Feedback Analysis</h3>
                                        <p class="text-indigo-100 text-sm">Generated by ThesisAI Assistant</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span id="streamStatus" class="px-3 py-1 bg-white bg-opacity-20 text-white text-xs font-medium rounded-full">
                                        <i class="fas fa-spinner fa-spin mr-1"></i>Generating...
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Content -->
                        <div class="p-6">
                            <div class="mb-6 p-4 bg-gray-50 rounded-lg border-l-4 border-indigo-500">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h4 class="font-medium text-gray-800" id="feedbackThesisTitle">Thesis Title</h4>
                                        <p class="text-sm text-gray-600" id="feedbackThesisDate">Upload Date</p>
                                    </div>
                                    <div class="text-right">
                                        <span class="px-2 py-1 bg-indigo-100 text-indigo-800 text-xs font-medium rounded" id="feedbackThesisStatus">Status</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Feedback Content -->
                            <div class="mb-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                                        <i class="fas fa-comment-dots text-indigo-600 text-sm"></i>
                                    </div>
                                    <h4 class="text-lg font-medium text-gray-800">Detailed Feedback</h4>
                                </div>

                                <div id="feedbackContent" class="prose prose-indigo max-w-none p-4 bg-gray-50 rounded-md min-h-[150px] overflow-y-auto"></div>
                            </div>

                            <div class="flex flex-wrap gap-3 pt-4 border-t border-gray-200">
                                <button onclick="downloadFeedback()" class="flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                                    <i class="fas fa-download mr-2"></i> Download PDF
                                </button>
                                <button onclick="showSection('uploadThesis')" class="flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium">
                                    <i class="fas fa-upload mr-2"></i> Upload Revised Version
                                </button>
                                <button onclick="requestNewFeedback()" class="flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium">
                                    <i class="fas fa-redo mr-2"></i> Request New Feedback
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="noThesesForFeedback" class="bg-white rounded-lg shadow p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-file-alt text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">You haven't uploaded any theses yet.</p>
                    <button onclick="showSection('uploadThesis')" class="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">
                        Upload Your First Thesis
                    </button>
                </div>
            </div>
        </div>

        <div id="supervisorFeedbackSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Supervisor Feedback</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div id="supervisorFeedbackContent">
                <div id="noSupervisorFeedback" class="bg-white rounded-lg shadow p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-comment-slash text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">You don't have any supervisor feedback yet.</p>
                    <p class="text-sm mt-2">Your supervisor will provide feedback after reviewing your thesis.</p>
                </div>
                
                <div id="supervisorFeedbackList" class="space-y-4 hidden">
                    <!-- Feedback cards will be added here -->
                </div>
            </div>
        </div>

        <!-- Supervisor Sections -->
        <div id="assignedStudentsSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Assigned Students</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Theses Count</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pending Review</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsList" class="bg-white divide-y divide-gray-200">
                            <!-- Students will be added here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noStudentsMessage" class="p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-user-graduate text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">You don't have any assigned students yet.</p>
                    <p class="text-sm mt-2">Contact the administrator to get students assigned to you.</p>
                </div>
            </div>
        </div>

        <div id="reviewThesesSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Review Theses</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thesis Title</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Upload Date</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="thesesToReviewList" class="bg-white divide-y divide-gray-200">
                            <!-- Theses will be added here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noThesesToReview" class="p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-check-circle text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">No theses require your review at this time.</p>
                </div>
            </div>
        </div>

        <div id="provideFeedbackSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Provide Feedback</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div id="feedbackFormContainer" class="hidden">
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="mb-4">
                        <h3 class="text-lg font-medium text-gray-800">Thesis Details</h3>
                        <div id="thesisDetails" class="mt-2 text-sm text-gray-600">
                            <!-- Thesis details will be added here -->
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h3 class="text-lg font-medium text-gray-800">AI Feedback</h3>
                        <div id="aiFeedbackPreview" class="mt-2 p-3 bg-gray-50 rounded text-sm text-gray-600">
                            <!-- AI feedback will be added here -->
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-gray-800">Your Feedback</h3>
                        <textarea id="supervisorFeedbackText" rows="10" class="mt-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Provide detailed feedback for the student..."></textarea>
                    </div>
                    
                    <div class="mt-4 flex justify-end space-x-3">
                        <button id="cancelFeedbackBtn" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button id="submitFeedbackBtn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium">
                            Submit Feedback
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="noThesisSelected" class="bg-white rounded-lg shadow p-8 text-center text-gray-500">
                <i class="fas fa-file-alt text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                <p class="text-lg">No thesis selected for feedback</p>
                <p class="text-sm mt-2">Please select a thesis from the "Review Theses" section to provide feedback.</p>
                <button onclick="showSection('reviewTheses')" class="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">
                    Go to Review Theses
                </button>
            </div>
        </div>

        <!-- Admin Sections -->
        <div id="manageUsersSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Manage Users</h2>
                <div>
                    <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center mr-4">
                        <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                    </button>
                    <button onclick="showAddUserModal()" class="text-sm bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1 rounded flex items-center">
                        <i class="fas fa-plus mr-1" aria-hidden="true"></i> Add User
                    </button>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Full Name</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersList" class="bg-white divide-y divide-gray-200">
                            <!-- Users will be added here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="assignSupervisorsSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Assign Supervisors</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6 mb-6">
                <h3 class="text-lg font-medium text-gray-800 mb-4">Current Assignments</h3>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Current Supervisor</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="assignmentsList" class="bg-white divide-y divide-gray-200">
                            <!-- Assignments will be added here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noStudentsToAssign" class="p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-user-graduate text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">No students available for assignment.</p>
                    <p class="text-sm mt-2">All students already have supervisors assigned.</p>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-medium text-gray-800 mb-4">Assign New Supervisor</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Select Student</label>
                        <select id="studentToAssign" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">-- Select a student --</option>
                            <!-- Students will be added here -->
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Select Supervisor</label>
                        <select id="supervisorToAssign" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">-- Select a supervisor --</option>
                            <!-- Supervisors will be added here -->
                        </select>
                    </div>
                </div>
                
                <div class="mt-6">
                    <button id="assignSupervisorBtn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md">
                        Assign Supervisor
                    </button>
                </div>
            </div>
        </div>

        <div id="allThesesSection" class="hidden p-6 fade-in">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">All Theses</h2>
                <button onclick="showSection('dashboard')" class="text-sm text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-arrow-left mr-1" aria-hidden="true"></i> Back to Dashboard
                </button>
            </div>
            
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Upload Date</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="allThesesList" class="bg-white divide-y divide-gray-200">
                            <!-- Theses will be added here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noThesesInSystem" class="p-8 text-center text-gray-500 hidden">
                    <i class="fas fa-file-alt text-4xl mb-3 text-gray-300" aria-hidden="true"></i>
                    <p class="text-lg">No theses have been uploaded to the system yet.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="fixed z-50 inset-0 overflow-y-auto hidden">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Add New User</h3>
                    
                    <form id="addUserForm" class="space-y-4">
                        <div>
                            <label for="newUsername" class="block text-sm font-medium text-gray-700">Username</label>
                            <input type="text" id="newUsername" name="newUsername" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div>
                            <label for="newEmail" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="newEmail" name="newEmail" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div>
                            <label for="newFullName" class="block text-sm font-medium text-gray-700">Full Name</label>
                            <input type="text" id="newFullName" name="newFullName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div>
                            <label for="newPassword" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="newPassword" name="newPassword" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div>
                            <label for="newRole" class="block text-sm font-medium text-gray-700">Role</label>
                            <select id="newRole" name="newRole" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="student">Student</option>
                                <option value="supervisor">Supervisor</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        
                        <div id="supervisorField" class="hidden">
                            <label for="newSupervisor" class="block text-sm font-medium text-gray-700">Supervisor</label>
                            <select id="newSupervisor" name="newSupervisor" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">-- Select a supervisor --</option>
                                <!-- Supervisors will be added here -->
                            </select>
                        </div>
                    </form>
                </div>
                
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="confirmAddUser" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm">
                        Add User
                    </button>
                    <button type="button" onclick="hideAddUserModal()" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Thesis Modal -->
    <div id="viewThesisModal" class="fixed z-50 inset-0 overflow-y-auto hidden">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="thesisModalTitle">Thesis Details</h3>
                            
                            <div class="mt-4">
                                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                                    <h4 class="font-medium text-gray-800">Basic Information</h4>
                                    <div id="thesisBasicInfo" class="mt-2 text-sm text-gray-600">
                                        <!-- Basic info will be added here -->
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-medium text-blue-800">AI Feedback</h4>
                                        <div id="thesisAIFeedback" class="mt-2 text-sm text-blue-600">
                                            <!-- AI feedback will be added here -->
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 p-4 rounded-lg">
                                        <h4 class="font-medium text-green-800">Supervisor Feedback</h4>
                                        <div id="thesisSupervisorFeedback" class="mt-2 text-sm text-green-600">
                                            <!-- Supervisor feedback will be added here -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 bg-white border border-gray-200 rounded-lg p-4">
                                    <h4 class="font-medium text-gray-800">Thesis Document</h4>
                                    <div id="thesisDocumentPreview" class="mt-2">
                                        <!-- Document preview will be added here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" onclick="downloadThesis()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm">
                        Download Thesis
                    </button>
                    <button type="button" onclick="hideViewThesisModal()" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 flex flex-col items-center">
            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mb-4"></div>
            <p class="text-gray-700">Processing, please wait...</p>
        </div>
    </div>

    <!-- main.js dependant -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <script src="main.js"></script>
</body>
</html>